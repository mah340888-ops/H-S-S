<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H S S | تفاصيل البرنامج</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .details-container { max-width: 1000px; margin: 30px auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .product-header-panel { display: flex; align-items: center; gap: 25px; background: #2c3e50; color: white; padding: 25px; border-radius: 12px; margin-bottom: 30px; }
        .product-header-icon { width: 100px; height: 100px; border-radius: 15px; object-fit: cover; background: white; padding: 5px; }
        .product-header-info h1 { margin: 0; font-size: 2rem; }
        .product-header-info .version-tag { background: #3498db; padding: 2px 10px; border-radius: 5px; font-size: 0.9rem; margin-top: 10px; display: inline-block; }
        .gallery-grid { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; scroll-behavior: smooth; }
        .gallery-img { width: 150px; height: 100px; border-radius: 8px; border: 2px solid #eee; cursor: pointer; transition: 0.3s; object-fit: cover; flex-shrink: 0; }
        .lightbox-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
        .lightbox-content { max-width: 90%; max-height: 90%; border-radius: 10px; }
        .close-lightbox { position: absolute; top: 20px; right: 30px; color: white; font-size: 40px; font-weight: bold; cursor: pointer; }
        .description-section { background: #fdfdfd; padding: 20px; border-right: 5px solid #3498db; margin-bottom: 40px; }
        .description-text { line-height: 1.8; color: #444; font-size: 1.1rem; white-space: pre-wrap; }
        .video-section { margin-bottom: 40px; text-align: center; }
        .video-player { width: 100%; max-width: 800px; border-radius: 15px; }
        .actions-section { text-align: center; border-top: 1px solid #eee; padding-top: 30px; }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">H S S</div>
            <ul id="nav-links">
                <li><a href="index.html">الرئيسية</a></li>
                <li><a href="products.html">البرامج</a></li>
                <li><a href="contact.html">تواصل معنا</a></li>
                <li><a href="register.html" id="auth-link">تسجيل حساب</a></li>
            </ul>
        </nav>
    </header>

    <script type="module">
        import { auth } from './firebase-config.js';

        function updateAuthLink() {
            const user = JSON.parse(localStorage.getItem('hss_user'));
            const authLink = document.getElementById('auth-link');
            const navLinks = document.getElementById('nav-links');
            
            if (user && user.isLoggedIn) {
                const dashboardPage = user.role === 'admin' ? 'admin.html' : 'profile.html';
                const dashboardText = user.role === 'admin' ? 'لوحة الإدارة' : 'لوحة التحكم';

                if (!document.getElementById('profile-link')) {
                    const li = document.createElement('li');
                    li.id = "profile-link";
                    li.innerHTML = `<a href="${dashboardPage}">${dashboardText}</a>`;
                    navLinks.insertBefore(li, authLink.parentNode);
                }
                authLink.innerHTML = `<span class="user-status">أهلاً، ${user.name.split(' ')[0]}</span>`;
                authLink.href = "#";
                authLink.onclick = (e) => {
                    e.preventDefault();
                    if(confirm('هل تريد تسجيل الخروج؟')) {
                        localStorage.removeItem('hss_user');
                        auth.signOut();
                        location.reload();
                    }
                };
            }
        }
        window.addEventListener('load', updateAuthLink);
    </script>

    <div class="details-container" id="product-details">
        <!-- تفاصيل البرنامج تظهر هنا -->
    </div>

    <div id="lightbox" class="lightbox-modal" onclick="closeLightbox()">
        <span class="close-lightbox">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>

    <script type="module" src="script.js"></script>
    <script type="module">
        window.addEventListener('load', () => {
            if (typeof showProductDetails === 'function') showProductDetails();
        });
    </script>
</body>
</html>
